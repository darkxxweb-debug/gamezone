<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>DarkX Game Zone</title>
<style>
 body { font-family: Arial, sans-serif; background: #0d0d0d; color:white; margin:0; padding:0; }
 header { background:#111; padding:15px; display:flex; justify-content:space-between; align-items:center; }
 h1 { margin:0; }
 #menu { font-size:28px; cursor:pointer; }
 #adminPanel, #adminLogin { display:none; padding:20px; background:#1a1a1a; }
 .game-card { background:#1a1a1a; padding:15px; margin:10px; border-radius:8px; }
 input, textarea, button { width:100%; padding:10px; margin-top:10px; border-radius:5px; border:none; }
 button { background:#e60000; color:white; cursor:pointer; }
 #gameList { padding:20px; }
 #search { padding:10px; width:90%; margin:15px; border-radius:6px; border:none; }
</style>
</head>
<body>
<header>
<h1>DarkX Game Zone</h1>
<div id="menu">â˜°</div>
</header>
<input type="text" id="search" placeholder="Search game..." />
<div id="gameList"></div>
<div id="adminLogin">
<h2>Admin Login</h2>
<input type="password" id="adminPassword" placeholder="Enter Admin Password" />
<button onclick="loginAdmin()">Login</button>
</div>
<div id="adminPanel">
<h2>Upload Game</h2>
<input type="text" id="gameName" placeholder="Game Name" />
<textarea id="gameDesc" placeholder="Description"></textarea>
<input type="text" id="gameLink" placeholder="Download Link" />
<input type="text" id="gameSize" placeholder="Size (e.g 500MB)" />
<button onclick="uploadGame()">Upload</button>
<hr>
<h2>Uploaded Games</h2>
<div id="adminGames"></div>
</div>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
 apiKey: "AIzaSyA7xpCvPWlVF4Cjyr-T3maagrKUF5zebcI",
 authDomain: "gamezone-26e95.firebaseapp.com",
 projectId: "gamezone-26e95",
 storageBucket: "gamezone-26e95.firebasestorage.app",
 messagingSenderId: "823410616788",
 appId: "1:823410616788:web:303655cfc06fc9a4fd4e41",
 measurementId: "G-KSNENW4WWZ"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// MENU
const menu = document.getElementById("menu");
menu.onclick = () => {
 document.getElementById("adminLogin").style.display = "block";
};

// LOGIN
function loginAdmin() {
 const pass = document.getElementById("adminPassword").value;
 if(pass === "DARKX2025"){
   document.getElementById("adminPanel").style.display = "block";
   document.getElementById("adminLogin").style.display = "none";
   loadAdminGames();
 } else {
   alert("Wrong password!");
 }
}
window.loginAdmin = loginAdmin;

// UPLOAD GAME
async function uploadGame(){
 const game = {
   name: document.getElementById("gameName").value,
   desc: document.getElementById("gameDesc").value,
   link: document.getElementById("gameLink").value,
   size: document.getElementById("gameSize").value
 };
 await addDoc(collection(db, "games"), game);
 alert("Game Uploaded!");
 loadGames();
 loadAdminGames();
}
window.uploadGame = uploadGame;

// LOAD GAMES FOR USERS
async function loadGames(){
 const querySnapshot = await getDocs(collection(db, "games"));
 const list = document.getElementById("gameList");
 list.innerHTML = "";
 querySnapshot.forEach(doc => {
   const g = doc.data();
   list.innerHTML += `<div class='game-card'>
     <h3>${g.name}</h3>
     <p>${g.desc}</p>
     <p><b>Size:</b> ${g.size}</p>
     <button onclick=\"window.location='${g.link}'\">Download</button>
   </div>`;
 });
}
loadGames();

// LOAD ADMIN GAMES
async function loadAdminGames(){
 const querySnapshot = await getDocs(collection(db, "games"));
 const list = document.getElementById("adminGames");
 list.innerHTML = "";
 querySnapshot.forEach(doc => {
   const g = doc.data();
   list.innerHTML += `<div class='game-card'><h4>${g.name}</h4></div>`;
 });
}

// SEARCH FILTER
const search = document.getElementById("search");
search.addEventListener('input', () => {
 const text = search.value.toLowerCase();
 const cards = document.querySelectorAll('.game-card');
 cards.forEach(c => {
   c.style.display = c.innerText.toLowerCase().includes(text) ? "block" : "none";
 });
});
</script>
</body>
</html>
